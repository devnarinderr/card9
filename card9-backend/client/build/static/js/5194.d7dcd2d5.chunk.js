"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[5194],{8279:(e,t,a)=>{a.d(t,{A:()=>d});var i=a(11942),l=a.n(i),n=a(76455),r=a(9950),o=a(52346),s=a(44414);const c=(0,r.forwardRef)(((e,t)=>{let{children:a,title:i="",meta:l,...r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.mg,{children:[(0,s.jsx)("title",{children:`${i} | Card9`}),l]}),(0,s.jsx)(o.A,{ref:t,...r,children:a})]})}));c.propTypes={children:l().node.isRequired,title:l().string,meta:l().node};const d=c},25194:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L});var i=a(9950),l=a(13564),n=a(82569),r=a(61467),o=a(60666),s=a(6890),c=a(19808),d=a(35007),h=a(13569),u=a(82053),g=a(50704),p=a(25979),m=a(19647),x=a(40815),A=a(3198),b=a(52346),f=a(25277),y=a(23266),j=a(28095),v=a(14857),C=a(59254),k=a(48089),w=a(25333),$=a(29925),S=a(66075);const W=(0,C.Ay)("div")({display:"flex",alignItems:"center",marginBottom:16}),I=(0,C.Ay)(S.A)((e=>{let{theme:t}=e;return{width:"32px",height:"32px",cursor:"pointer",margin:"8px 16px",[t.breakpoints.down("sm")]:{margin:"8px"}}})),O=(0,C.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",flexWrap:"wrap",[t.breakpoints.down("md")]:{justifyContent:"center"}}})),R=(0,C.Ay)(k.A)((e=>{let{theme:t}=e;return{width:400,margin:"1rem",borderRadius:"0.5rem",textDecoration:"none",[t.breakpoints.down("sm")]:{width:360,margin:"auto",marginBottom:16}}})),T=(0,C.Ay)("form")({}),B=(0,C.Ay)("div")((e=>{let{color:t}=e;return{backgroundColor:t,position:"relative",height:"385px",overflow:"hidden",userSelect:"none"}})),D=(0,C.Ay)(w.A)((e=>{let{indicator:t}=e;return{position:"absolute",background:t,color:"#fff",":hover":{background:t}}})),_=(0,C.Ay)("label")((e=>{let{theme:t,background:a}=e;return{display:"block",background:`url(${a})`,backgroundColor:t.palette.grey[200],backgroundRepeat:"no-repeat",height:"100%",backgroundPosition:"30% bottom",backgroundSize:"60%",cursor:"pointer"}})),q=(0,C.Ay)("input")({display:"none"}),z=(0,C.Ay)($.A)((e=>{let{indicator:t}=e;return{marginBottom:1,"& .Mui-focused":{"&.MuiInputLabel-root":{color:t},"&:after":{borderColor:t}}}})),F=((0,C.Ay)("div")({}),(0,C.Ay)("div")((e=>{let{theme:t}=e;return{margin:"3px 24px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"10px"}})));var M=a(8279),N=a(78822),P=a(82138),V=a(35781),E=a(44414);const U={PaperProps:{style:{maxHeight:224,width:250}}},H=(e,t,a)=>({fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}),L=()=>{const e=(0,v.A)(),[t,a]=(0,i.useState)([]),[C,k]=(0,i.useState)(!1),[w,$]=(0,i.useState)(null),[L,Y]=(0,i.useState)(!1),[Z,G]=(0,i.useState)([]),[J,K]=(0,i.useState)([]),[Q,X]=(0,i.useState)(!1),ee=(0,l.Zp)(),{user:te}=(0,n.d4)((e=>e.auth));let ae=[],ie=[];(0,i.useEffect)((async()=>{await P.A.getAllCards(te.data?te.data.id:te.id).then((e=>{var t;e&&(null===(t=e.cards)||void 0===t||t.map((e=>{ie.push(e),ae.push(e.cardName)})))})),G(ie),K(ae)}),[]);const le=o.Ik().shape({image:o.gl().required("Catalog Image Required"),title:o.Yj().required("Title is required")}),ne=(0,r.Wx)({initialValues:{image:"",title:"",description:"",url:"",price:""},validationSchema:le,onSubmit:(e,a)=>{console.log(e);let i=[];null===Z||void 0===Z||Z.map(((e,a)=>{t.includes(e.cardName)&&i.push({id:e.id,name:t.length>1?t[a]:t[0]})}));const l=Object.assign({...e},{card:i,isCardTheme:Q});V.A.newCatalogue(l,te.data?te.data.id:te.id).then((e=>{$("Catalog successfully created."),setTimeout((()=>{k(!0),a.setSubmitting(!1)}),1e3),setTimeout((()=>{ee("/app/catalogue")}),3e3)}))}}),{values:re,handleChange:oe,handleSubmit:se,setFieldValue:ce,isSubmitting:de,errors:he,touched:ue}=ne;(0,i.useEffect)((()=>{setTimeout((()=>{Y(!1)}),2e3)}),[L]);const ge=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;return(0,E.jsx)(S.A,{icon:e,width:t,height:a})};return(0,E.jsxs)(M.A,{title:"Add Catalog",children:[(0,E.jsx)(N.A,{open:L,setOpen:se,type:"error",title:"Error",msg:he.image}),(0,E.jsx)(N.A,{open:C,setOpen:k,type:"success",title:"Success",msg:w}),(0,E.jsxs)(c.A,{maxWidth:"xl",children:[(0,E.jsx)(W,{children:(0,E.jsx)(d.A,{title:"Back",children:(0,E.jsx)(I,{icon:"eva:arrow-back-fill",onClick:()=>(e=>{e(-1)})(ee)})})}),(0,E.jsx)(O,{children:(0,E.jsxs)(R,{children:[(0,E.jsxs)(T,{children:[(0,E.jsxs)(B,{color:"grey",children:[re.image?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(h.A,{component:"img",image:re.image,alt:"avatar",sx:{height:"100%",objectFit:"contain"}}),(0,E.jsx)(D,{variant:"contained",onClick:()=>{document.getElementById("inputImage").click()},indicator:re.theme,sx:{top:12,right:64},children:ge("bi:camera-fill")}),(0,E.jsx)(D,{variant:"contained",onClick:()=>ce("image",""),indicator:re.theme,sx:{top:12,right:24},children:ge("bi:trash-fill")})]}):(0,E.jsx)(_,{htmlFor:"inputImage",background:"/static/illustrations/avatar-background.svg",children:(0,E.jsx)(u.A,{sx:{textAlign:"center",pt:2,opacity:.5},children:"Upload a photo or video"})}),(0,E.jsx)(q,{id:"inputImage",type:"file",accept:"image/*",name:"profile",onChange:e=>(async e=>{const t={maxSizeMB:.8,maxWidthOrHeight:500,useWebWorker:!0};if(e.target.files&&e.target.files.length){const a=new FileReader,i=await(0,s.A)(e.target.files[0],t);a.readAsDataURL(i),a.onloadend=()=>{ce("image",a.result)}}})(e)})]}),(0,E.jsxs)(g.A,{sx:{p:"0 !important",mb:2,mt:5},children:[(0,E.jsx)(z,{fullWidth:!0,variant:"standard",name:"title",label:"Catalogue Title",value:re.title,onChange:oe,error:ue.title&&Boolean(he.title),helperText:ue.title&&he.title,sx:{mx:3,width:"-webkit-fill-available"},indicator:"grey"}),(0,E.jsx)(z,{fullWidth:!0,variant:"standard",name:"description",label:"Catalogue Description ",value:re.description,multiline:!0,onChange:oe,sx:{mx:3,width:"-webkit-fill-available",mt:3},indicator:"grey"}),(0,E.jsx)(z,{fullWidth:!0,variant:"standard",name:"url",label:"Catalogue URL ",value:re.url,onChange:oe,sx:{mx:3,width:"-webkit-fill-available",mt:3},indicator:"grey"}),(0,E.jsx)(z,{fullWidth:!0,variant:"standard",name:"price",label:"Catalogue Price ",value:re.price,onChange:oe,sx:{mx:3,width:"-webkit-fill-available",mt:3},indicator:"grey"})]})]}),(0,E.jsxs)(p.A,{sx:{width:300,mx:3,width:"-webkit-fill-available",mb:3,mt:2},children:[(0,E.jsx)(m.A,{id:"multiple-chip-label",children:"Card"}),(0,E.jsx)(x.A,{labelId:"multiple-chip-label",id:"multiple-chip",multiple:!0,defaultValue:"",value:t,onChange:e=>{const{target:{value:t}}=e;a("string"===typeof t?t.split(","):t)},input:(0,E.jsx)(A.A,{id:"select-multiple-chip",label:"Chip",required:!0}),renderValue:e=>(0,E.jsx)(b.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>(0,E.jsx)(f.A,{label:e},e)))}),required:!0,MenuProps:U,children:J.map((a=>(0,E.jsx)(y.A,{value:a,style:H(a,t,e),children:a},a)))})]}),(0,E.jsxs)(F,{children:[(0,E.jsxs)("label",{className:"switch",children:[(0,E.jsx)("input",{type:"checkbox",onChange:()=>{X(!Q)}}),(0,E.jsx)("span",{className:"slider"})]}),(0,E.jsx)("span",{style:{color:"#72797f",fontWeight:400,fontSize:"16px"},children:"Add Card Theme"})]}),(0,E.jsx)(j.A,{fullWidth:!0,size:"large",variant:"contained",type:"submit",sx:{background:re.theme,borderRadius:0,position:"sticky",bottom:0},loading:de,onClick:()=>{se(),he.image&&Y(!0)},children:"Save"})]})})]})]})}},35781:(e,t,a)=>{a.d(t,{A:()=>n});var i=a(29246);const l=`${a(53619).$}/api/Catalogue/`,n={newCatalogue:(e,t)=>i.A.post(`${l}new-catalogue/${t}`,{catalogData:e}).then((e=>e)).catch((e=>e.response)),getOneCatalogue:e=>i.A.get(`${l}${e}`).then((e=>e)).catch((e=>e.response)),getOneCatalogueWithName:e=>i.A.get(`${l}name/${e}`).then((e=>e)).catch((e=>e.response)),getAllCataloguesByCardId:e=>i.A.get(`${l}all-catalogue/${e}`).then((e=>e)).catch((e=>e.response)),getAllCataloguesByUserId:e=>i.A.get(`${l}all-catalogue-by-user/${e}`).then((e=>e)).catch((e=>e.response)),deleteCatalogue:e=>i.A.delete(`${l}delete/${e}`).then((e=>e)).catch((e=>e.response)),editCatalogue:(e,t)=>i.A.patch(`${l}edit/${t}`,{catalogueData:e}).then((e=>e)).catch((e=>e.response))}},66075:(e,t,a)=>{a.d(t,{A:()=>d});var i=a(9950),l=a(11942),n=a.n(l),r=a(14650),o=a(52346),s=a(44414);const c=(0,i.forwardRef)(((e,t)=>{let{icon:a,sx:i,...l}=e;return(0,s.jsx)(o.A,{component:r.In,icon:a,sx:{...i},ref:t,...l})}));c.propTypes={icon:n().oneOfType([n().element,n().string]),sx:n().object};const d=c},78822:(e,t,a)=>{a.d(t,{A:()=>c});var i=a(3913),l=a(33174),n=a(25333),r=a(92743),o=a(66075),s=a(44414);function c(e){let{open:t,setOpen:a,title:c,msg:d,type:h="success"}=e;return(0,s.jsx)(i.A,{open:t,autoHideDuration:3e3,onClose:()=>a(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,s.jsxs)(l.A,{severity:h,action:(0,s.jsx)(n.A,{"aria-label":"close",color:"inherit",size:"small",onClick:()=>{a(!1)},children:(0,s.jsx)(o.A,{icon:"clarity:times-circle-line",width:22,height:22})}),sx:{textAlign:"left"},children:[(0,s.jsx)(r.A,{sx:{m:0},children:c}),d]})})}},82138:(e,t,a)=>{a.d(t,{A:()=>n});var i=a(29246);const l=`${a(53619).$}/api/card/`,n={getOneCard:e=>i.A.get(`${l}${e}`,{name:e}).then((e=>e)).catch((e=>{console.error(e)})),getAllCards:e=>i.A.get(`${l}all-cards/${e}`,{userId:e}).then((e=>e.data)).catch((e=>{console.error(e)})),newCard:(e,t)=>i.A.post(`${l}new-card/${t}`,{cardData:e,userId:t}).then((e=>e)).catch((e=>e.response)),editCard:(e,t)=>i.A.patch(`${l}edit/${t}`,{cardData:e}).then((e=>e)).catch((e=>e.response)),downloadVcf:e=>i.A.get(`${l}add-contact/${e}`).then((e=>(console.log("--=-=",e),e))).catch((e=>e.response)),deleteCard:e=>{i.A.delete(`${l}delete/${e}`,{id:e}).then((e=>{})).catch((e=>{console.error(e)}))}}}}]);