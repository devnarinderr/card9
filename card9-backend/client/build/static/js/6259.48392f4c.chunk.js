"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[6259],{8279:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(11942),n=a.n(r),o=a(76455),i=a(9950),s=a(52346),l=a(44414);const d=(0,i.forwardRef)(((e,t)=>{let{children:a,title:r="",meta:n,...i}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.mg,{children:[(0,l.jsx)("title",{children:`${r} | Card9`}),n]}),(0,l.jsx)(s.A,{ref:t,...i,children:a})]})}));d.propTypes={children:n().node.isRequired,title:n().string,meta:n().node};const c=d},32741:(e,t,a)=>{a.d(t,{E:()=>n,f:()=>r});const r=e=>{const t=new Date,a=new Date(e).getTime()-t.getTime();return Math.ceil(a/864e5)},n=e=>{if(e){const t=new Date(e),a=t.getFullYear();t.setFullYear(a);const r=t.getDate(),n=t.getMonth()+1,o=t.getFullYear();return`${r.toString().padStart(2,"0")}-${n.toString().padStart(2,"0")}-${o}`}return null}},44997:(e,t,a)=>{a.d(t,{A:()=>p});var r=a(9950),n=a(13564),o=a(59254),i=a(14857),s=a(48089),l=a(13569),d=a(45180),c=a(56175),m=a(32520),u=a(44414);const h=(0,o.Ay)(c.A)({position:"absolute",bottom:36,left:0});function p(e){let{small:t,cardData:a,image:o}=e;const[c,p]=(0,r.useState)(null),{id:g}=((0,i.A)(),(0,n.g)());let v,f;if(g)v=o.profile;else if(void 0!==o&&Array.isArray(o)){const e=o.find((e=>e&&e[a.id]));v=e?e[a.id]:"/static/mock-images/avatars/avatar_1.jpg"}else v="/static/mock-images/avatars/avatar_1.jpg";if(v){f=(0,m.EX)(v)}return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(s.A,{sx:{width:t?160:200,height:t?200:240,cursor:"pointer",borderRadius:"0.5rem",textDecoration:"none"},children:["mp4"===f?(0,u.jsx)(l.A,{component:"video",src:v,muted:!0,alt:"avatar",height:t?"160":"200",style:{backgroundColor:null===a||void 0===a?void 0:a.theme}}):(0,u.jsx)(l.A,{component:"img",height:t?"160":"200",image:v,alt:"avatar",style:{backgroundColor:null===a||void 0===a?void 0:a.theme}}),(0,u.jsx)(h,{color:null===a||void 0===a?void 0:a.theme}),(0,u.jsx)(d.A,{title:null===a||void 0===a?void 0:a.cardName,sx:{fontSize:"1rem",padding:0,height:40,textAlign:"center"}})]})})}},45180:(e,t,a)=>{a.d(t,{A:()=>y});var r=a(98587),n=a(58168),o=a(9950),i=a(2803),s=a(88465),l=a(82053),d=a(48283),c=a(59254),m=a(423);function u(e){return(0,m.A)("MuiCardHeader",e)}const h=(0,a(1763).A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var p=a(44414);const g=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],v=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,n.A)({[`& .${h.title}`]:t.title,[`& .${h.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),f=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),A=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),x=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),y=o.forwardRef((function(e,t){const a=(0,d.A)({props:e,name:"MuiCardHeader"}),{action:o,avatar:c,className:m,component:h="div",disableTypography:y=!1,subheader:b,subheaderTypographyProps:j,title:w,titleTypographyProps:C}=a,R=(0,r.A)(a,g),$=(0,n.A)({},a,{component:h,disableTypography:y}),k=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},u,t)})($);let S=w;null==S||S.type===l.A||y||(S=(0,p.jsx)(l.A,(0,n.A)({variant:c?"body2":"h5",className:k.title,component:"span",display:"block"},C,{children:S})));let M=b;return null==M||M.type===l.A||y||(M=(0,p.jsx)(l.A,(0,n.A)({variant:c?"body2":"body1",className:k.subheader,color:"text.secondary",component:"span",display:"block"},j,{children:M}))),(0,p.jsxs)(v,(0,n.A)({className:(0,i.A)(k.root,m),as:h,ref:t,ownerState:$},R,{children:[c&&(0,p.jsx)(f,{className:k.avatar,ownerState:$,children:c}),(0,p.jsxs)(x,{className:k.content,ownerState:$,children:[S,M]}),o&&(0,p.jsx)(A,{className:k.action,ownerState:$,children:o})]}))}))},56175:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(44414);function n(e){let{color:t,...a}=e;return(0,r.jsxs)("svg",{...a,preserveAspectRatio:"xMinYMax meet",viewBox:"0 0 246 57",children:[(0,r.jsx)("path",{d:"M 214.7168,6.1113281 C 195.65271,5.9023124 172.37742,11.948182 137.87305,32.529297 110.16613,49.05604 86.980345,56.862784 65.015625,57 H 65 v 1 H 246 V 11.453125 C 236.0775,8.6129313 226.15525,6.2367376 214.7168,6.1113281 Z",fill:"#ffffff",clipRule:"evenodd",fillRule:"evenodd"}),(0,r.jsx)("path",{d:"M 0,35.773438 V 58 H 65 L 64.97852,57 C 43.192081,57.127508 22.605139,49.707997 0,35.773438 Z ",fill:"#ffffff",clipRule:"evenodd",fillRule:"evenodd"}),(0,r.jsx)("path",{fill:t,clipRule:"evenodd",fillRule:"evenodd",d:"m 0,16.7221 v 19.052 C 45.4067,63.7643 82.6667,65.4583 137.873,32.5286 193.08,-0.401184 219.54,3.87965 246,11.4535 V 6.51403 C 185.24,-16.8661 135.913,29.331 97.6933,40.8564 59.4733,52.3818 33.6467,44.1494 0,16.7221 Z"})]})}},66075:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(9950),n=a(11942),o=a.n(n),i=a(14650),s=a(52346),l=a(44414);const d=(0,r.forwardRef)(((e,t)=>{let{icon:a,sx:r,...n}=e;return(0,l.jsx)(s.A,{component:i.In,icon:a,sx:{...r},ref:t,...n})}));d.propTypes={icon:o().oneOfType([o().element,o().string]),sx:o().object};const c=d},78822:(e,t,a)=>{a.d(t,{A:()=>d});var r=a(3913),n=a(33174),o=a(25333),i=a(92743),s=a(66075),l=a(44414);function d(e){let{open:t,setOpen:a,title:d,msg:c,type:m="success"}=e;return(0,l.jsx)(r.A,{open:t,autoHideDuration:3e3,onClose:()=>a(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,l.jsxs)(n.A,{severity:m,action:(0,l.jsx)(o.A,{"aria-label":"close",color:"inherit",size:"small",onClick:()=>{a(!1)},children:(0,l.jsx)(s.A,{icon:"clarity:times-circle-line",width:22,height:22})}),sx:{textAlign:"left"},children:[(0,l.jsx)(i.A,{sx:{m:0},children:d}),c]})})}},82138:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(29246);const n=`${a(53619).$}/api/card/`,o={getOneCard:e=>r.A.get(`${n}${e}`,{name:e}).then((e=>e)).catch((e=>{console.error(e)})),getAllCards:e=>r.A.get(`${n}all-cards/${e}`,{userId:e}).then((e=>e.data)).catch((e=>{console.error(e)})),newCard:(e,t)=>r.A.post(`${n}new-card/${t}`,{cardData:e,userId:t}).then((e=>e)).catch((e=>e.response)),editCard:(e,t)=>r.A.patch(`${n}edit/${t}`,{cardData:e}).then((e=>e)).catch((e=>e.response)),downloadVcf:e=>r.A.get(`${n}add-contact/${e}`).then((e=>(console.log("--=-=",e),e))).catch((e=>e.response)),deleteCard:e=>{r.A.delete(`${n}delete/${e}`,{id:e}).then((e=>{})).catch((e=>{console.error(e)}))}}},86259:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var r=a(9950),n=a(13564),o=a(82569),i=a(82053),s=a(78822),l=a(13386),d=a(59254),c=a(19808);const m=(0,d.Ay)(c.A)({display:"flex",flexWrap:"wrap"}),u=(0,d.Ay)("div")((e=>{let{theme:t}=e;return{position:"absolute",left:"50%",top:"40%",[t.breakpoints.down("sm")]:{left:"38%",top:"50%"}}})),h=(0,d.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:200,height:240,margin:"1rem",color:t.palette.primary.main,background:t.palette.grey[200],border:`2px dotted ${t.palette.primary.main}`,borderRadius:"0.5rem",cursor:"pointer",transition:"300ms ease 0s",textDecoration:"none",":hover":{transform:"scale(1.05)"},[t.breakpoints.down("sm")]:{margin:"auto",marginBottom:16}}})),p=(0,d.Ay)("div")((e=>{let{theme:t}=e;return{margin:"1rem",cursor:"pointer",transition:"300ms ease 0s",":hover":{transform:"scale(1.05)"},[t.breakpoints.down("sm")]:{margin:"auto",marginBottom:16}}})),g=(0,d.Ay)("div")((e=>{let{theme:t}=e;return{background:"#fefcf0",maxWidth:"60%",display:"flex",marginLeft:"2.5rem",borderRadius:10,alignItems:"center",padding:5,marginBottom:10,[t.breakpoints.down("sm")]:{margin:"auto",marginBottom:16}}}));var v=a(8279),f=a(66075),A=a(44997),x=a(82138),y=a(53744),b=a(32520);const j=e=>t=>x.A.getOneCard(e).then((e=>(t({type:y.u9,payload:{card:e.data}}),(0,b.B2)(e.data),Promise.resolve())),(e=>(t({type:y.$}),Promise.reject())));const w=a.p+"static/media/warning.366f844c0b4b1bf272ecbc56c93b03c7.svg";var C=a(32741),R=a(44414);function $(){const{user:e}=(0,o.d4)((e=>e.auth)),t=(0,n.Zp)(),a=(0,o.wA)(),[d,c]=(0,r.useState)(),[y,b]=(0,r.useState)(),[$,k]=(0,r.useState)(!1),[S,M]=(0,r.useState)(e.data?e.data.limit:e.limit),[T,N]=(0,r.useState)(!1),[D,H]=(0,r.useState)(""),[W,_]=(0,r.useState)(!1),[B,P]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{k(!0),await x.A.getAllCards(e.data?e.data.id:e.id).then((e=>{var t;if(b(null===e||void 0===e?void 0:e.images),c(null===e||void 0===e?void 0:e.cards),(null===e||void 0===e||null===(t=e.cards)||void 0===t?void 0:t.length)>1)k(!1);else{var a;const t=null===e||void 0===e||null===(a=e.cards)||void 0===a?void 0:a.map((e=>(0,C.f)(e.expiredAt)));t[0]<=30&&(N(!0),H(`Warning! Your annual subscription is ending in ${t[0]} days.`),t[0]<=30&&(H(`Warning! Your card will be disabled in ${t[0]} days, Please contact us for renewal.`),t[0]<=0&&(H("Warning! Your card is disabled, Please contact us for renewal."),_(!0)))),k(!1)}})).catch((e=>{console.error(e)}))}catch(t){console.log("ERROR:::",t)}})()}),[]);return(0,R.jsxs)(v.A,{title:"Cards",children:[T?(0,R.jsxs)(g,{children:[(0,R.jsx)("img",{width:"24",height:"24",style:{marginLeft:5,marginRight:10},src:w,alt:"warning"}),(0,R.jsx)("h3",{style:{fontWeight:"lighter"},children:D})]}):(0,R.jsx)(R.Fragment,{}),(0,R.jsx)(s.A,{open:B,setOpen:P,type:"warning",title:"Warning",msg:"Sorry, your card is disabled."}),(0,R.jsxs)(m,{maxWidth:"xl",children:[S>(null===d||void 0===d?void 0:d.length)&&(0,R.jsxs)(h,{onClick:()=>t("new"),children:[function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:22,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:22;return(0,R.jsx)(f.A,{icon:e,width:t,height:a})}("carbon:add",48,48),(0,R.jsx)(i.A,{sx:{fontSize:20},children:"Add Card"})]}),(0,R.jsx)(u,{children:(0,R.jsx)(l.ul,{visible:$,height:"80",width:"80",ariaLabel:"blocks-loading",wrapperClass:"blocks-wrapper",colors:["#e15b64","#f47e60","#f8b26a","#abbd81","#849b87"]})}),d?d.map(((e,r)=>(0,R.jsx)(p,{onClick:()=>{W?P(!0):t(`${e.cardName}`),a(j(e.cardName))},children:(0,R.jsx)(A.A,{cardData:e,image:y[r]})},r))):(0,R.jsx)(R.Fragment,{})]})]})}},92743:(e,t,a)=>{a.d(t,{A:()=>v});var r=a(58168),n=a(98587),o=a(9950),i=a(2803),s=a(88465),l=a(59254),d=a(48283),c=a(82053),m=a(423);function u(e){return(0,m.A)("MuiAlertTitle",e)}(0,a(1763).A)("MuiAlertTitle",["root"]);var h=a(44414);const p=["className"],g=(0,l.Ay)(c.A,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{fontWeight:t.typography.fontWeightMedium,marginTop:-2}})),v=o.forwardRef((function(e,t){const a=(0,d.A)({props:e,name:"MuiAlertTitle"}),{className:o}=a,l=(0,n.A)(a,p),c=a,m=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},u,t)})(c);return(0,h.jsx)(g,(0,r.A)({gutterBottom:!0,component:"div",ownerState:c,ref:t,className:(0,i.A)(m.root,o)},l))}))}}]);